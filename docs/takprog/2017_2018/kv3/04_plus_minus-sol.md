Означимо са $s_k$ збир првих $k$ елемената низа, тј. $s_k = \sum_{i=1}^k x_k$ za $1 \leq k\leq n$. Зваћемо ове збирове парцијалне суме. Lако се закључује да је збир елемената ед елемента на позицији $i$ до елемента на позицији $j$ једнак

$$
x_i + x_{i+1} + ... +x_{j-1} + x_j = s_j - s_{i-1}.
$$

Ако је збир елеманата од елемента на позицији $i$ до елемента на позицији $j$ позитиван, онда је $s_j-s_{i-1} > 0$, односно $s_{i-1} < s_j$.  Ако је збир елеманата од елемента на позицији $i$ до елемента на позицији $j$ негативан, онда је $s_j-s_{i-1} < 0$, односно $s_{j} < s_{i-1}$. 
 
Формираћемо оријентисан граф $G=(V,E)$ у коме чворови одговарају парцијалним сумама (можемо чворове нумерисати и бројевима између $0$ и $n$). За сваку неједнакост облика $s_a < s_b$ уводимо ивицу од чвора који одговара парцијалној суми $s_a$ до чвора који одговара парцијалној суми $s_b$. Ако у том графу постоји петља, онда не постоји низ који задовољава задате услове. Наиме, петља је низ чворова у коме се први и последњи чвор поклапају такав да између свака два узастопна постоји ивица. Нека тај низ чине чворови

$$
s_{k_1}, s_{k_2}, s_{k_3}, ..., s_{k_c}, s_{k_1}.
$$

Тада за парцијалне суме важи

$$
s_{k_1} < s_{k_2} < s_{k_3} < ..., <s_{k_c} < s_{k_1} 
$$

и због транзитивности је $s_{k_1} < s_{k_1}$, што је контрадикција.

Ако у графу $G$ не постоји циклус, чворови графа се могу поређати у низ тако да ако постоји ивица од чвора $s_a$ до чвора $s_b$ онда је чвор $s_a$ стоји у низу пре чвора $s_b$. Свако такво ређање у низ се назива тополошко сортирање и може се обавити варијацијом на обилазак графа у дубину. На основу тог набрајања чворова, парцијалним сумама (чворовима графа) можемо доделити целе бројеве, тако да се чвору $s_0$ додели вредност 0, чворовима који се налазе после њега у том набрајању редом бројеви $1, 2, 3, \ldots$ (у складу са поретком у набрајању), а чворовима који се налазе пре њега редом бројеви $-1, -2, -3, \ldots$ (овај пут сдесна улево, у складу са набрајањем). Лако се уверавамо да ће за свака два чвора $s_a$ и $s_b$ важити да ако је $s_a$ пре (лево) од $s_b$ у набрајању, онда је $s_a < s_b$. Другим речима, парцијалним сумама смо доделили различите целе бројеве и они задовољавају све неједнакости које су задате у улазним подацима.

На основу парцијалних сума се могу одредити елементи низа $x_i = s_i - s_{i-1}$ za $1\leq i \leq n$.

## Смернице за алгоритам
Дајемо само псеудокод за топошко сортирање (набрајање). Претпостављамо да је граф репрезентован помоћу вектора/листи суседа својих чворова. Резултат који враћа функција је $0$, ако граф јесте ацикличан (поред тога је у низу `tops` његово тополошко сортирање), a $1$, ако је граф има бар једну петљу и самим тим не постоји тополошко сортирање. 

```
topsort() {
	p = n;
	for (i = 0; i <= n; i++)
		mark[i] = BEO
	for (i = 0; i <= n; i++) 
		if (mark[i] == BEO)
			if (topsortr(i) != 0) return 1;
	return 0;
}
topsortr(i) {
	mark[i] = SIV;
	for (k = 0; k < susedi[i].size(); k++) {
		  j = susedi[i][k];
		  if (mark[j] == SIV) return 1;
		  if (mark[j] == BEO)
			  if (topsortr(j) != 0) return 1;
	}
	tops[p] = i;
	p = p - 1;
	mark[i] = CRN;
	return 0;
}
```


