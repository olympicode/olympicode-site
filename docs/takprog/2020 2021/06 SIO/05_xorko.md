
# Ксорко

Аутор: Павле Мартиновић
Текст и тест примери: Павле Мартиновић
Анализа решења: Павле Мартиновић
Тестирање: Алекса Милисављевић

### ﻿$N\leq10,A_i\leq1$
Приметимо да има највише $2^{10}$ могућих комбинација (сваки број може бити $1$ или $0$). Сада напросто ручно бектреком претражимо сва могућа стања до којих можемо стићи обраћајући пажњу да ниједно стање не посећујемо више пута. Укупна сложеност $O(2^N\cdot N)$.
### ﻿$N\leq10,A_i\leq63$
Овај подзадатак је сличан претходном, али са општим бројевима. Наиме, исто решење бектреком (мада са мало компликованијом провером стања - нпр. неком хеш функцијом), ће у овом подзадатку радити у сложености $O(N!\cdot N)$, јер заправо постоји постоји највише $N!$ могућих стања низа. Доказ овога представљамо у наредним подзадацима.
### $N\leq3000$
Приметимо следеће:
Нека су $P[i]$ префиксни битовски ксорови низа $A$ (значи $P[i]=A[1]\text{ xor }A[2]\text{ xor }\cdots\text{ xor }A[i]$). Сада ако извршимо операцију из текста задатка на елемент $i$, приметимо да то замени вредности $P[i-1]$ и $P[i]$. Заиста, ако кренемо да рачунамо нове вредности
$$P'[i-1]=A[1]\text{ xor }A[2]\text{ xor }\cdots\text{ xor }A[i-1]\text{ xor }A[i]=P[i]$$ 
$$P'[i]=A[1]\text{ xor }A[2]\text{ xor }\cdots\text{ xor }A[i-1]\text{ xor }A[i]\text{ xor }A[i]=P[i-1]$$
док све остале вредности низа $P[i]$ остају непромењене јер се дејство на елементе $A[i-1]$ и $A[i+1]$ скрати (или уопште не утиче).
Приметимо сада да можемо на произвољан начин да испермтујемо првих $N-1$ префиксних ксорова овог низа, и како за дати низ префиксних ксорова можемо на јединствен начин реконструисати низ ($A[i]=P[i]\text{ xor }P[i-1]$), такви низови који се добију тим пермутовањем префиксних ксорова су управо и једини низови које је могуће добити (одакле и следи да је највећи број различитих низова које могуће добити $(N-1)!$). 
Сада кад смо ово уочили смо скоро па готови са овим подзадатком. Наиме, треба похлепно бирати пермутацију префиксних ксорова тако да се добије лексикографски највећи низ. У сваком тренутку прођемо кроз остале префиксне ксорове који су нам остали и напросто изаберемо онај који нам даје највећи ксор са претходно изабраним. Обратити посебну пажњу на последњи префиксни ксор, који се не може мењати. Сложеност $O(N^2)$.
### ﻿$A_i\leq1$
Са опсервацијама из претходног подзадатка, овде се може смислити релативно лако решење облика: похлепно узимамо алтернирајуће префиксне ксорове који су $1$ и $0$ алтернирајуће док нам неких не понестане.
### ﻿$A_i\leq15$
Овај подзадатак (а и последњи), се ослања на то да се убрза похлепно тражење наредног члана у $N\leq3000$ решењу. Овде пошто нам је само битна вредност префиксног ксора, која је до $15$, па онда је довољно да само имамо $count$ низ који броји колико имамо које вредности међу префиксним сумама и онда прођемо кроз све могуће вредности следећег члана и изаберемо ону оптималну. Сложеност $O(N\cdot\max A_i)$
### Пуно решење
Убацимо све префиксне ксорове у бинарни *trie*. Наиме, запишимо сваки тај број као његов бинарни запис тако да има тачно $60$ цифара (са потенцијалним водећим нулама). Сада све те вредности убацимо у наш *trie*. Сада за тако припремљену структуру, могуће је врло брзо наћи елемент који са датим бројем $x$ даје највећи ксор, тако што се спуштамо низ трие и похлепно бирамо да одемо у дете са супротном цифром, уколико постоји. Такође могуће је брзо избацити број из наше структуре. 
Сада напросто изградимо ту структуру и идемо редом, и увек бирамо из ње онај елемент који са претходном вредношћу даје највећи могући ксор, а затим је избацујемо из исте. 
Сложеност $O(N\cdot\log \max A_i)$. 
