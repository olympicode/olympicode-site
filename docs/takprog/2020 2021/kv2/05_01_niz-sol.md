## Решење када је $C=N$
Не исплати се окретати поднизове новчића за цену $C$ јер можемо појединачно да их окренемо за мању или једнаку цену. Решење се своди на најмањи број окретања по једног оновчића тако да се добију све нуле. Нема разлога да икада окренемо новчић на ком је 0, а сваки новчић на ком је 1 окрећемо по једном, односно решење је број јединица у низу. За 2 поена можемо после сваке промене да прођемо кроз низ и пребројимо јединице. Временска сложеност је $O(QN)$. За 4 поена треба да приметимо да се после сваке промене за коју је $L_i=R_i$ мења тачно један новчић у низу па можемо лако да израчунамо за колико се променио број јединица посматрајући само тај новчић. Временска сложеност је $O(N+Q)$. За 16 поена треба да израчунавамо број јединица помоћу сегментног стабла са лењом пропагацијом. Временска сложеност је $O(QlogN)$.

## Решење када је $C=1$
Можемо да окрећемо поднизове за исту цену као и појединачне новчиће, тако да је решење најмањи број окретања поднизова тако да добијемо све нуле. Замислимо да смо на почетак и крај низа додали по један новчић са нулом на видљивој страни. Пребројмо све парове суседних новчића тако да су им различити бројеви на видљивим странама. Ако је овај број 0 у низу су све нуле. Окретање подниза мења стање тачно 2 од поменутих парова и за свака два пара постоји подниз који мења њихова стања. Зато је решење број парова суседних новчића чији су видљиви бројеви различити подељен са 2. Ако се ово пребројавање ради проласком кроз цео низ после сваке промене добија се 4 поена. Временска сложеност је $O(QN)$. Већ знамо да свака промена мења стање тачно два пара па ако то искористимо можемо лако да нађемо за колико се променио број парова које бројимо. Ово решење је временске сложености $O(N+Q)$ и носи 10 поена.

## Решење када је $Q=1$
Овај случај можемо да решимо динамичким програмирањем. Потребна нам је следећа опсервација. У неком од оптималних решења, обрнућемо неке дисјунктне поднизове и затим све јединице појединачно. Нека је $dp_i$ минимална цена за првих $i$ новчића. Последњи новчић може бити обрнут за цену $C$ са неким поднизом или не, па је $dp_i = max(dp_{i-1} + S_i, max_{j=1}^i(dp_{j-1} + C + broj_nula(j,i)))$. Ово решење је временске сложености $O(N^2)$ и носи 8 поена. За 26 поена потребно је решење у бољој временској сложености. Нека је $dp_{i, 0}$ решење за првих $i$ новчића ако $i$-ти новчић није био обрнут као члан подниза, а $dp_{i, 1}$ решење ако јесте. Онда је $dp_{i, 0}=max(dp_{i-1, 0}, dp_{i-1, 1})+S_i$ и $dp_{i, 1}=max(dp_{i-1, 0}+C, dp_{i-1, 1})+(1-S_i)$. Ово решење је временске сложености $O(N)$.

## Решење када је $L_i=R_i$
Ако бисмо $Q$ пута искористили решење за $Q=1$ добили бисмо решење у временској сложености $O(NQ)$ што је превише споро за овај подзадатак. Ипак треба да приметимо да велики део низа остаје исти и да то треба некако да искористимо. Можемо да направимо сегментно стаблно над низом новчића и да у сваком чвору чувамо неке $dp$ вредности. За сваки сегмент чувамо 4 решења $dp_{l,r}$, где је $l=1$ ако је први новчић био обрнут као члан подниза и $r=1$ ако је последњи новчић био обрнут као члан подниза. Са овим информацијама можемо да спојимо $dp$ вредности за два подниза и решење задатка ће бити у корену сегментног стабла. Временска сложеност овог решења је $O(QlogN)$.

## Решење за 100 поена
За свих 100 поена потребно је да на сегментном стаблу применомо **lazy propagation** технику. За сваки чвор чуваћемо $dp$ вредности за сегмент и $dp$ вредности за сегмент ако бисмо обрнули све новчиће на њему. Када треба да обрнемо подниз, заменићемо ове $dp$ вредности за неке сегменте и обрнути њихове *lazy* тагове. Временска сложеност остаје $O(QlogN)$.
