Прво сортирамо низ $A$ растуће. Од сада са $A_i$ означавамо $i$-ти најмањи елемент низа $A$. 

## Решење за $A_i, B_i, N, M \leq 3000$:
Довољно нам је да проверимо свако могуће $X$ (све бројеве од $1$ до $3000$).  Неко $X$ је могуће само ако дели $A_{i+1}-A_i$ за свако $1 \leq i \leq N-1$, а не дели $|B_i-A_1|$ ни за једно $1 \leq i \leq M$. Временска сложеност је $O(T \cdot maxA \cdot (N+M))$.

## Решење за $N = 2$:
Знамо да $X$, ако постоји, мора да дели $A_2 - A_1$, али пошто та разлика може да буде велика, не можемо да проверимо све делиоце. Можемо да приметимо да ако број $p$ дели број $q$, сваки делилац од $p$ такође дели $q$. То нам говори да нам је довољно проверити да ли је $A_2 - A_1$ добар кандидат за $X$, јер ако не дели ниједно од $|B_i-A_1|$ онда је у реду, у супротном и сви његови делиоци деле неки од $|B_i-A_1|$, па решење не постоји. Временска сложеност је $O(T \cdot (N+M))$.

## Решење за $A_i \leq 10^6$:
Пошто $X$ мора да дели све разлике $A_{i+1}-A_i$, једини кандидати су делиоци најмањег заједничког делиоца тих разлика, односно, ако $X$ постоји, важи $X \mid НЗД(A_2-A_1, A_3-A_2, ..., A_N-A_{N-1})$. НЗД можемо нађи Еуклидовим алгоритмом, а пошто делиоца има $O(\sqrt{maxA})$, укупна временска сложеност је $O(T \cdot (NlogN + M\sqrt{maxA}))$. 

## Главно решење:
Ако спојимо решења за претходна два подзадатка можемо видети да је довољно проверити да ли $X$ може бити $НЗД(A_2-A_1, A_3-A_2, ..., A_N-A_{N-1})$. Уколико не, не може ниједан његов делилац. Временска сложеност је $O(T \cdot (NlogN + M))$.

