# Анализа

Да би збир одговора на упите био што већи, потребно је да сума елемената низа буде што већа. Сума елемената је највећа онда када елементи низа имају највећу могућу вредност. Највећа могућа вредност се добија након што се примене сви упити типа $1$ у којима се елементи низа увећавају за неку позитивну вредност.
Због тога је потребни прво извршити упите типа $1$ код којих се вредност елемената увећавају за позитиввну вредност, а затим све упите типа $2$ и на крају упите типа $1$ код којих се вредности елемената увећавају за негативну вредност.

Ако је сума елемената низа износила $S$, онда након примене упита $1\  l\  r\  x$ сума елемената низа износи 
$$
S_n = S + (r - l + 1) \cdot x.
$$

Према томе, потребно је одредити суму свих елемената након примене свих упита типа $1$ код којих се неки елементи увећавају за неку позитивну вредност (нека та сума износи $S_m$) и број упита типа $2$ (нека је то $n_2$).
Тада ће сума одговора на упите изноосити
$$
n_2 \cdot S_m.
$$

Лако се показује да је сложеност алгоритма $\Theta(n+m)$, где је $n$ број елемената у низу, $m$ укупан број упита.  