Задатак решавамо користећи неки од познатих алгоритама за конвкесни омотач попут "Graham scan" и "Monotone chain". Проблем се јавља када желимо да израчунамо векторски производ зато што су кoординате реда величине $10^{1000}$.

## Први подзадатак:
Можемо имплементирати множење, сабирање и одузимање великих бројева користећи ниске. Приметимо такође да је довољно посматрати позицију $10^{200}$ секунди након експлозије те ће множење ниских бити довољно брзо.

## Други подзадатак:
У даљем тексту $\aleph$ представља $10^{1000}$. Означимо са $U$ скуп свих метеора који иду нагоре и са $D$ скуп свих метеора који иду надоле. Ако желимо да одредимо да ли тачка $C$ има десни или леви заокрет у односу на (оријентисану) дуж $AB$ после $\aleph$ секунди размотрићемо следеће случајеве: 

1.  $A,B,C\in U$: У овом случају можемо израчуанти орјентацију пре експлозије. 

2. $A,B\in U$ и $C\in D$: Ако $A_x=B_x$ онда се права $AB$ неће транслирати и због тога можемо да упоредимо $C_x$ са $A_x$ и $A_y$ са $B_y$. У супротном пошто ће се права $AB$ транслирати за $\aleph$ нагоре, тачка $C$ ће бити испод праве $AB$ после експлозије па ће због тога бити десни заокрет ако $B_x>A_x$, а иначе леви.

3. $A,C\in U$ и $B\in D$: Коефицијент праве $AB$ ће бити реда $10^{991}$ и $A$ и $C$ се неће померити релативно (остају "близу" једна другој за разлику од тачке $B$), $|A_x-C_x| \leq 2\cdot 10^9$, $|A_y-C_y| \leq 2\cdot 10^9$ те ће заокрет $C$ у однусу на $AB$ бити исти као и заокрет $C$ у односу на $AD$ где је $D=(A_x,B_y)$.

Сваки од осталих 5 случајева је аналоган неком од претходних. Временска сложеност је $О(N \log N)$, а меморијска $O(N)$.

## Трећи подзадатак:
Довољно је на сваку кординату додати односно одузети $10^9$ уместо $10^{1000}$ и наћи конвексни омотач за те тачке. Ово се може доказати представљањем бројева као парова слично као у главном решењу. Када рачунамо векторски производ никада нећемо 
множити неки број више од једном. Због тога ће нам други број у уређеном пару бити максимално реда $О(M^2)$, где је $|M| \leq 5000$, што ће бити мање од $10^9$, па ће тад и $c$-у одређивати знак. Временска сложеност је $О(N \log N)$, а меморијска $O(N)$.

## Главно решење:
Сваки број $A$ ћемо представити као уређену тројку $(a,b,c)$ тако да $A = a\cdot \aleph ^2 + b \cdot \aleph + c$ и $|a|,|b|,|c| < \aleph$. Дефинишимо сабирање, одузимање и множење два пара на следећи начин:
 $$(a,b,c) + (d,e,f) = (a + d, b+e, c+f)$$
 
$$(a,b,c) - (d,e,f) = (a-d, b-e, c-f)$$

$$(a,b,c)\cdot (d,e,f) = (a\cdot f + d\cdot c + b \cdot e, b\cdot f + e\cdot c, c \cdot f)$$

У коду $b$ члан у уређеној тројки $(a,b,c)$ никад неће прећи по апсолутној вредности $\aleph$ јер је оно превелико, као ни $a$ . У множењу две тројке смо занемарили вредности реда већег од $\aleph ^2$ јер када рачунамо векторски производ ниједну тројку нећемо множити више од једампут, а свака на почетку има $c = 0$.  Сваку тачку после $\aleph$ времена ћемо представити као уређен пар уређених тројки $((a,b,c),(d,e,f))$ где су $c$ и $f$ координате тачке на почетку, $b$ и $e$ одређени у односу на правац и смер кретања метеора, а $a = c = 0$. Можемо векторски производ два вектора да рачунамо користећи претходно дефинисане операције. 

Када добијемо $(a,b,c)$ као резултат потребно је да проверимо знак броја $A = a\cdot \aleph^2 + b\cdot \aleph +c$. Ако $А\neq 0$ онда знак одређује члан у уређеној тројци с највећом тежином.

Временска сложеност је $O(N \log N)$, а меморијска $O(N)$.
