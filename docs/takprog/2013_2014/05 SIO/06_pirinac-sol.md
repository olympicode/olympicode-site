## Први подзадатак
На упите одговарамо наивним проласком кроз низ једном петљом, замењујући или додавањем на елементе низа директно. Сложеност је $O(N \cdot Q)$.

## Други подзадатак
Функција **Ubaci** повећава један елемент низа, а функција **Izmesaj** замењује два суседна његова елемента (односно један повећава, а други смањује). Овим имамо линеаран број упита повећавања и имамо упите збира на сегменту, што нас наводи да задатак решавамо сегментним стаблом у сложености $O(N+QlogN)$.

## Трећи подзадатак
Како не позивамо функцију **Izmesaj**, задатак се своди на упите распона повећања и суме. Сегментно стабло са лењом пропагацијом решава овај подзадатак у $O(N+QlogN)$.

## Четврти подзадатак
Низ се може поделити у листу блокова величине $\sqrt N$; сваки блок чува листу целих бројева који означавају саме елементе низа и још један цео број који означава за колико још додатно треба увећати сваки елемент те листе. **Ubaci** и **Prebroji** није тешко имплементирати у $О(\sqrt N)$. 
Што се тиче функције **Izmesaj**, она ће прво по потреби поделити блокове у којима се налазе крајеви њеног распона на два блока (како радимо са листама то је ефикасно, такође увек настаје највише 4 нова блока). Затим треба да "измешамо" одређене целе блокове, али то је опет само избацивање из и додавање у листу (која садржи листе).
Напоменимо само да се након $\sqrt N$ позива функције **Izmesaj** блокови морају направити изнова у $O(N)$ како би њихов број остао коренског реда. Укупна сложеност је $O(N+Q\sqrt N)$.

## Главно решење
Направимо сегментно стабло, али у ком ће величина сваког чвора бити степен двојке. Такође урадимо то итеративно: за најмање $k$ такво да $2^k\geq N$ најнижи ниво ће обухватати сегменте $[0,0],[1,1],[2,2],...[2^k-1,2^k-1]$, следећи ће $[0,1],[2,3],..,[2^k-2,2^k-1]$, ... корен ће обухватати један сегмент $[0,2^k-1]$. 
Упите увећања и збира радимо исто као у трећем подзадатку, а за мешање морамо уочити једну лепу ствар код растављања сегмента на чворове у оваквом стаблу. Најпре приметимо да сви сегменти у упиту имају величину степена двојке, као и њихове половине. To чини да растављање леве и десне половине упита на чворове тополошки имају исту структуру. Формалније, ако се лева половина, редом, раставља на чворове $x_1,x_2,...,x_p$, а десна на $y_1,y_2,...,y_q$, важиће $p=q$ и 

$$size(x_1)=size(y_1),size(x_2)=size(y_2),...,size(x_p)=size(y_q)$$

где $size(t)$ представља величину сегмента који тај чвор представља. Ово чини да се сваки чвор може лако заменити са његовим одговарајућим, потребно је само стабло имплементирати **имплицитно**. Временска сложеност је $O(N+QlogN)$.

