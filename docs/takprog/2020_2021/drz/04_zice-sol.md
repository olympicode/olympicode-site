Једном компонентом жица зваћемо скуп свих жица до којих стигне струја ако додирнемо неку од њих.

## Решење за $N \leq 5000$:
Конструишимо граф где су чворови жице, а грана између два чвора постоји ако се жице секу. Након овога довољно је применити било који графовски алгоритам који може бројати број компонентни, на пример ДФС (претрагу у дубину). Временска и меморијска сложеност: $O(N^2)$.

## Решење када се жице секу са сваком жицом до које стиже струја:
Другачије речено, у свакој компоненти жица се свака жица сече са сваком. За овај подзадатак нам је била потребна главна идеја у задатку: **када сортирамо жице по $A_i$ свака компонента жица ће се састојати од узастопних жица**. Ово можемо доказати тако што претпоставимо супротно: постоји компонента која се састоји од макар два (одвојена) узастопна низа жица. Да би оне биле у истој компоненти, морају се сећи нека жица из 'левог' интервала и нека из 'десног' интервала. Можемо видети ипак (најбоље ако ово нацртамо), да ће било која жица између та два интервала такође морати да сече макар једну од жица из та два интервала, да би стигла до друге стране. 

Када знамо ово, можемо да сортирамо жице по $A_i$, па идемо са лево на десно. Нова компонента почиње на индексу $i$ ако се жице $A_i$ и $A_{i-1}$ не секу. Временска сложеност: $O(NlogN)$,  меморијска сложеност: $O(N)$. 

## Решење када се струја шири на још највише 5 жица:
Другачије речено, свака компонента је величине највише $6$. Поново сортирамо жице по $A_i$. Можемо решити подзадатак да више начина. Идемо опет са лева на десно, и проверавамо за наредних $6$ жица да ли припадају истој компоненти, ако не, проверимо уместо тога за $5$ жица, итд... Временска сложеност: $O(NlogN)$, меморијска сложеност: $О(N)$.

Може се решити и графовски слично решењу за $N \leq 5000$.

## Главно решење
Поново сортирајмо жице по $A_i$. Нумеришимо их са лева на десно бројевима од $1$ до $N$. Сада сортирајмо жице по $B_i$, и доделимо им претходне вредности (редни број жице при сортирању по $A_i$). Тако добијамо пермутацију бројева од $1$ до $N$. Означимо са $maxx_i$ максимум првих $i$ елемената у пермутацији. 

Тражимо крај прве компоненте: то је најмање $i$, тако да су првих $i$ елемената пермутације, пермутација бројева од $1$ до $i$. То је у ствари најмање $i$ за које важи да је $maxx_i = i$. Сличним резоновањем, долазимо до закључка да се свака компонента завршава индексом такав да важи $maxx_{index} = index$, па је само потребно да избројимо такве индексе. Временска сложеност: $O(NlogN)$, меморијска сложеност: $O(N)$.
