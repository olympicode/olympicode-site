## Решење када је $N, Q \leq 1000$

На упите за овај подзадатак могуће је одговорити директним израчунавањем тражене суме.

## Решење када је $S_i \leq 10$

Упите можемо да решавамо из два дела. Првих $S_i$ чланова суме можемо да урачунамо директно по формули као у прошлом подзадатку, а за остале чланове знамо да је $m > S_i$ па је $S_i$ $mod$ $m = S_i$, те је довољно наћи њихову суму и помножити је са $S_i$. За брзе упите о суми на поднизу можемо да користимо структуру података **бинарно индексирано стабло** или **сегментно стабло**. Ове структуре подржавају измену чланова низа, тако да лако можемо да подржимо и ажурирања игрице. Временска сложеност је $O((N+Q)logN)$.

## Решење када је $A_i = 1$ и $T_i = 1$

У овом подзадатку упити се своде на израчунавање суме $\Sigma_{m=1}^{R_i - L_i + 1} (S_i$ $mod$ $m)$. Приметимо да је $S_i$ $mod$ $m = S_i - \lfloor \frac{S_i}{m} \rfloor \cdot m$, па можемо суму да раставимо по минусу. Први део је $S_i \cdot (R_i - L_i + 1)$ и од њега одузимамо други део који рачунамо из више делова. Првих $\sqrt{S_i}$ чланова суме рачунамо директно по формули. За остале чланове постоји највише $\sqrt{S_i}$ различитих вредности за $\lfloor \frac{S_i}{m} \rfloor$ и можемо да одредимо леву и десну границу за сваку вредност тако да можемо да израчунамо $\Sigma_{m=l}^{r} \lfloor \frac{S_i}{m} \rfloor \cdot m$ као $\lfloor \frac{S_i}{m} \rfloor \Sigma_{m=l}^{r} m$ применом формуле за збир узастопних природних бројева или прекалкулисањем ових сума. Временска сложеност је $O(Q \sqrt{S})$.

## Решење када је $T_i = 1$

Упите решавамо на сличан начин као у претходном подзадатку, али су формуле мало компликованије. Прекалкулисаћемо префиксне суме низа $A_i$ и низа $A_i \cdot i$. Проналазимо групе као у прошлом подзадатку и уместо збира узастопних целих бројева, користићемо прекалкулисане вредности. $\Sigma_{m=l}^{r} A_{L_i + m - 1} \cdot \lfloor \frac{S_i}{m} \rfloor \cdot m$ се своди на израчунавање $\Sigma_{m=l}^{r} A_{L_i + m - 1} \cdot m$ пошто је вредност $\lfloor \frac{S_i}{m} \rfloor$ фиксна за сваку групу. Израчунавање поменуте суме могуће је преко сума подниза низа $A_i$ и $А_i \cdot i$. временска сложеност је $O(Q \sqrt(S))$

## Решење за све бодове

За цело решење потребно је још подржати операције измене низа. Довољно је уместо прекалкулисаних префиксних сума користити **бинарно индексирано стабло** за одржавање сума на поднизу. Временска сложеност овог решења је $O(Q \sqrt{S} log N)$
