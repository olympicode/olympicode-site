Означимо са $r$, $g$ и $b$, редом број црвених, зелених и плавих куглица. Тада ће у најнеповољнијем случају црвену куглици извући након што извуче све зелене и плаве. Слично ће зелену куглицу извући најкасније након извлачења свих црвених и плавих, а плаву након што извуче све црвене и зелене. Према томе, важиће следеће неједнакости
$$
A \leq g+b+1,\quad B \leq r+b+1, \quad C \leq r+g+1.
$$
Поред тога је укупан број куглица једнак $N$, па важи:
$$
r+g+b = N.
$$

## Решење кад је $N \leq 200$

У овом случају, можемо за све могуће вредности бројева $r$, $g$ и $b$ (а то су природни бројеви између $1$ и $N$), проверити да ли задовољавају три неједнакости и последњу једнакост и прекинути проверавање оног тренутка када су задовољене. Ако поменуте неједнакости и једнакост нису задовољени ни за једну комбинацију вредности $r$, $g$ и $b$, не постоји распоред куглица који одговара вредностима $A$, $B$ и $C$. Очигледно је сложеност овог решења $O(N^3)$. 

## Решење кад је $N \leq 2000$

Приметимо да за фиксиране вредности броја црвених ($r$) и зелених ($g$) куглица можемо одредити број плавих куглица по формули $b=N-r-g$. Због тога је довољно за све комбинације вредности бројева $r$ и $g$ (а то су бројеви између $1$ и $N$), одредити вредност броја $b$, а након тога проверити да ли су задовољене три неједнакости. 
Сложеност овог решења $O(N^2)$.

## Главно решење

Како у врећи треба да буде бар једна црвена, зелена и плава, бројеве куглица можемо приказати као
$$
r = 1 + r1,\quad g = 1+g1, \quad b = 1+b1,\quad r1,g1,b1\geq 0.
$$
Тада ваши следеће:

$$
r1+g1+b1 = (r-1) + (g-1) + (b-1) = (r+g+b)-3 = N-3 = N1.
$$

Поред тога, полазне неједнакости постају:
$$
A\leq g+b+1 = (1+b1)+(1+b1)+1 = g1+b1+3,
$$
односно
$$
g1+b1 \geq A-3,
$$
или прецизније
$$
g1+b1 \geq \max(A-3,0) = A1.
$$
Слично се добија
$$
r1+b1 \geq \max(B-3,0)=B1
$$
и
$$
r1+g1 \geq \max(C-3,0) = C1.
$$
Сабирањем последње три неједнакости добијамо
$$
2r1+2g1+2b1=2N1\geq A1+B1+C1,
$$
и ово је потребан услов да би постојало решење.

Показује се да је то и довољан услов. Да би одредили решење, приметимо да из услова
$$
r1+g1+b1 = N1\quad\text{и}\quad g1+b1\geq A1,
$$
добијамо
$$
r1 = N1-(g1+b1) \leq N1-A1 = r1_{max},
$$
и слично:
$$
g1 \leq N1-B1= g1_{max}\quad\text{и}\quad b1 \leq N1-C1=b1_{max}.
$$
За бројеве $r1$, $g1$ и $b1$ бирамо највеће који задовољавају неједнакости и у збиру дају број $N1$.
Приметимо да се могу одабрати бројеви $r1$, $g1$ и $b1$ тако да задовољавају горње неједнакости и збир буде $N1$ зато што је збир горњих ограничења 
$$
r1_{max}+g1_{max}+b1_{max} = (N1-A1)+(N1-B1)+(N1-C1) = 3N1 - (A1+B1+C1) \geq 3N1 - 2N1 = N1.
$$
Коначно, саме вредности можемо изабрати на следећи начин:
$$
r1 = \min(N1,N1-A1),\quad
g1 = \min(N1-r1, N1-B1),\quad
b1=\min(N1-r1-g1,N-C1).
$$

Сложеност овог решења је $O(1)$.



