## Решење за $N, M \leq 1000$
Овде је могуће применити разна спорија решења, нпр. можемо одржавати скуп *активних* визит карти, односно оних које нису још одбачене или сачуване од стране директора. Сваког тренутка, све активне визит карте шаљемо надређеном и онда симулирамо поређење визит карти. Временска сложеност: $O(N\cdot M)$, меморијска сложеност: $O(N+M)$.

## Решење за $p_i = i-1$
У овом случају хијерархија компаније је линеарна, тј. само пут од сваког запосленог до директора. Најбитнија обзервација у овом задатку јесте да можемо игнорисати сва сусретања визит карти пре директора. Ако су се две карте сусреле пре директора, заједно ће и стићи код директора, где ће се свакако поредити и одбацити.

Ово нам говори да је довољно да за сваки тренутак одредимо колико визит карти стиже код директора тад. Карта која се појавила у тренутку $t_i$ код особе $p_i$ ће код директора стићи у тренутку $t_i+p_i-1$, па користећи нпр. структуру *map* или обично сортирање, одредити све што нам је потребно да израчунамо колико карата ће бити одбачено (уколико у тренутку $t$ стиже $x$ карата код директора, тада он одбацује $\lfloor \frac{x}{2} \rfloor \cdot 2$ визит карти. Временска сложеност: $O(N+MlogM)$, меморијска сложеност: $O(N+M)$. 

## Решење за $t_i = 1$
Решење је слично главном решењу, само што је могуће избећи мапу/сортирање, и лакше је приметити погребу за дубинама запослених.

## Главно решење:
Попут решења када $p_i = i-1$, игноришемо поређења сем код директора. Једина разлика је што овај пут морамо другачије да израчунамо у ком тренутку ће се нека карта наћи код директора. Потребно је да израчунамо *дубину* сваког запосленог, односно колико је секунди потребно да визит карта од особе $i$ стигне до директора (означимо то са $d_i$). 

За ово је могуће користити графовске алгоритме, али пошто важи $p_i < i$ то није неопходно. Довољно је да то урадимо користећи следеће формуле: $d_1 = 0$
 и $d_i = d_{p_i} + 1$. Када то израчунамо, време када ће нека карта доћи до директора је $t_i + d_{v_i}$. Временска сложеност: $O(N+MlogM)$, меморијска сложеност: $O(N+M)$.

