## Решење када $N, M \leq 5, A_i \leq 1$
Пошто су димензије матрице мале, а једине могуће вредности у матрици $0$ и $1$, постоји доста мало стања у којима се може наћи матрица. Симулирамо процес секунду по секунду, док се не деси да смо већ видели дато стање. Пошто знамо да ћемо на даље да се вртимо у круг, знамо да ће решење бити једно од датих стања. Које тачно стање ће то бити можемо добити користећењем формула.

## Решење када $K \leq 5$
Пошто је $K \leq 5$, значи да нам је битно само понашање матрице у првих $2^5 = 32$ секунди. Пре свих питања, израчунаћемо све матрице, и онда за свако питање можемо само исписати тражено поље одговарајуће матрице.

Временска сложеност је $O(2^KNM + Q)$, а меморијска $О(2^KNM)$. 

## Решење када $K \leq 200$ 
Поново ћемо чувати матрице за свако $K$, али овај пут ћемо их рачунати на начин који ће бити описан у следећа два решења. 

## Решење када су све почетне вредности $0$, сем једне која је $1$
Посматрањем како се ова јединица понаша кроз време у бесконачној матрици можемо закључити да ће након $2^K$ секунди да се налази на позицијама $(x+2^K, y)$, $(x-2^K, y)$, $(x, y+2^K)$ и $(x, y-2^K)$. Ово можемо и једноставно доказати индукцијом. За базу $K = 0$ ово је очигледно тачно. Ако претпоставимо да је тачно за неко $K$, и применимо индуктивну хипотезу на $4$ тако добијене тачке, видећемо да се дешава нешто занимљиво - сва поља сем она $4$ која су нам потребна се скрате (xor је инверз сам себи), па смо доказали тврђење. 

Сада, за свако питање је довољно проверити да ли је у питању једно од највише четири поља који садрже јединицу. Пошто ова матрица није бесконачна, морамо користећи формуле да добијемо тачне координате јединица у њој. 

Временска сложеност је $O(NM+M+K)$, а меморијска $O(NM+K)$. 

## Главно решење
Приметимо да ће сва поља у матрици бити xor неких поља почетне матрице. Користећи претходно решење, за свако поље почетне матрице можемо пронаћи у xor-у којих поља матрице ће се налазити након $2^K$ секунди. Тако можемо закључити да ће вредност поља $(x, y)$ након $2^K$ секунди бити xor вредности поља $(x+2^K, y)$, $(x-2^K, y)$, $(x, y+2^K)$ и $(x, y-2^K)$ у почетној матрици. 

Временска сложеност је $O(NM+M+K)$, а меморијска $O(NM+K)$. матрици. 

