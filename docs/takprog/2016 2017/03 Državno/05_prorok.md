Најједноставније решење би било да пробамо сваку могућу вредност
за период супротних одговора $K$, и испишемо прву која даје
конзистентне одговоре. За свако $K$, можемо прво окренути сваки
$K$-ти одговор, па пребројати одговоре "да" и "не" на свако
питање једним пролазом кроз низ. Ово захтева пролазак кроз цео
низ за сваки од $N$ кандидата за $K$, тако да би укупна сложеност
била $\mathcal{O}(N^2)$.

Начин на који водимо евиденцију о броју одговора на свако питање
је битан: пошто њихови идентификациони бројеви могу бити до
$10^9$, низ са једним елементом за сваки од њих неће стати у
меморију. Уместо овога, можемо користити структуру као што је
`std::map`, по цену додатног $\mathcal{O}(\log N)$ фактора у
сложености. Пошто можемо имати највише $N$ различитих питања,
боље решење је да на почетку "препакујемо" бројеве у интервал од
$1$ до $N$, а затим користимо низ са $N$ чланова. Ово можемо
урадити, на пример, тако што сортирамо сва питања, и онда
најмањем доделимо број 0, следећем 1, и тако даље.

Да би постигли бољу сложеност, можемо искористити следећу
оптимизацију: пошто се за свако $K$ мења само сваки $K$-ти
одговор, посматраћемо само њих и нећемо пролазити кроз цео низ,
осим на почетку програма да би израчунали неке почетне вредности
које ће нам бити потребне. За $K = 1$ ћемо проћи кроз $N$
вредности, за $K = 2$ кроз $\frac{N}{2}$, и тако даље, тако да ће
укупна сложеност бити:

$$ \frac{N}{1} + \frac{N}{2} + \frac{N}{3} + \dots = \mathcal{O}(N \log N) $$

За свако $K$, наш алгоритам је:
* Почињемо од почетног стања, где за свако питање имамо број
  одговора "да" и "не" датих на улазу.
* Променимо сваки $K$-ти одговор тако што одговарајућем питању
  пребацимо $1$ из "оригиналног" одговора у нови.
* Проверимо да ли постоји питање које има и "да" и "не" одговоре.
  Ако не постоји, нашли смо решење $K$.
* Поништимо све измене које смо направили, на пример још једним
  проласком кроз сваки $K$-ти одговор.

Сваки од ових корака је једноставан, осим трећег -- пролазак кроз
сва питања би нас коштао $\mathcal{O}(N)$ времена, и укупна
сложеност би опет била квадратна. Уместо тога, можемо проћи само
кроз она питања за која смо мењали одговоре, и проверити да важе
два услова:

* Ниједно више нема и "да" и "не" одговоре.
* Број питања која су на почетку имала оба одговора је исти као
  претходно израчунат број оваквих питања у целом улазу (тј. сва
  контрадикторна питања су "исправљена").