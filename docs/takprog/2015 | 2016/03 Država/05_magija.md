# Магија

Аутор: Немања Шкорић
Текст и тест примери: Демјан Грубић
Анализа решења: Александар Вишњић
Тестирање: Никола Јовановић

### Први подзадатак:
У овом подзадатку дата хијерархија представља вертикални ланац чији је чвор $1$ на врху. Једина дозвољена операција коју ми смемо да извршимо јесте брисање чвора са дна. Сваки чвор има рок до ког морамо да га обришемо. Овај процес је могуће симулирати једним проласком кроз ланац јер постоји само једна могућа опција за брисање по дану. Потребно је  проверити за сваки чвор да ли смо га обрисали пре истека његовог рока. Временска сложеност је $O(N)$.

### Други подзадатак:
Користићемо похлепан алгоритам. Дата хијерархија је стабло и смемо да бришемо његове листове. У сваком тренутку ћемо обрисати било који лист који има најскорији рок.  
То можемо учинити у $O(N)$ тако што пролазимо по свим чворовима и тражимо минималан лист. Како има $N$ брисања, укупна временска сложеност је $O(N^2)$.

### Трећи подзадатак:
Истим поступком бришемо чворове, али потребно је ефикасније наћи минималан лист и гарантовати услов да деца имају ранији рок од родитеља. Услов можемо испунити тако што ћемо за сваки чвор са роком $T$ поставити рок $T-1$ на свако његово дете које тренутно има већи рок. Ако је могуће обрисати родитеља на време, онда се морају испунити и дати рокови за његову децу. Ово се ефикасно имплементира једним $DFS$ проласком кроз стабло, почев од чвора $1$. (корена стабла) 

Минимални лист тражимо на следећи начин: у сваком чвору бинарног стабла једноставно памтимо индекс минималног који је у његовом подстаблу. (Биће минимум од 2 његова детета, или сам тај чвор ако нема децу) Када обришемо лист, потребно је за све његове претке (којих има $O(logN)$ ) поставити нову адекватну вредност. Укупна временска сложеност је $O(NlogN)$ .

### Главно решење:

Опет ћемо гарантовати услов за рок, али нам треба нов начин за тражење минималног листа. Овај пут ћемо једноставно стављати све листове у *min heap* структуру (односно ***priority_queue*** у који стављамо парове, први члан пара је рок чвора и онај по коме поредимо парове, а други члан је индекс чвора). Када бришемо чвор једноставно бришемо елемент на врху у  *min heap*. Уколико настане нови лист брисањем чвора, додајемо га у *min heap*. Временска сложеност је $O(NlogN)$ .
