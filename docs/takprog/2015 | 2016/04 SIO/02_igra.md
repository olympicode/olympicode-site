# Игра
﻿
Аутор: Демјан Грубић
Текст и тест примери: Демјан Грубић 
Анализа решења: Александар Вишњић
Тестирање: Борис Грубић

### Подзадатак 1:
Стабло има својство бипартитивности: сваки чвор се може обојити у црно или бело тако да суседни чворови увек имају различиту боју. Један потез по услову задатка увек мења боју на којој се фигурица налази. Можемо направити следећу трдњу: ако је $W$ најкраћи пут између нека два чвора $U$ и $V$, онда су могуће дужине свих осталих путева (који могу бити само-пресецајући) $W+2,W+4,W+6,...$
Путеви краћи од $W$ не постоје, а путеви чија је дужина другачије парности од $W$ такође не постоје због бипартитивности. Сви остали постоје јер је увек могуће изаћи из чвора и вратити се у њега за $2$ потеза.

Најкраћи путеви из сваког чвора могу се наћи ефикасно и једноставно било којим алгоритмом за претраживање целог стабла у сложености $O(N)$. Остало је само циклично проверити који дани су могући и одредити одговарајуће парности. Временска сложеност је $O((N+M+D)\cdot K)$, а меморијска 
$O(N^2+K)$ или $O(N+M+K)$.

### Подзадатак 2:
Користићемо исто решење као у претходном подзадатку, само је потребно још и проверити да ли дужине најкраћих путева имају исту парност. Ако је дат услов испуњен, онда је могуће да се све фигурице нађу на својим крајњим позицијама након $max(W_i)$ потеза, где је $W_i$ дужина најкраћег пута од $U_i$ до $V_i$.

### Подзадаци 3,4 и 5:
Граф више не мора да буде бипартитиван, али можемо направити нови који ће бити: сваки чвор у њему нумеришемо исто као и у претходном, али чувамо црну и белу верзију. Гране су исте, али повезујемо искључиво суседне чворове са супротним бојама верзија. Нови граф ће бити дупло већи по броју чворова и грана и бипартитиван. Можемо претпоставити да све фигурице крећу из белог чвора и треба да стигну у одговарајући чвор произвољне боје. Битно је да свака фигурица заврши у чвору исте боје (тј. да им дужине путева имају исту парност). Остало је наћи најкраћи пут од беле верзије $U_i$ до обе верзије $V_i$. (Или одредити да пут не постоји) Опет ћемо рачунати $max(W_i)$ и парност као у претходним подзадацима, али овог пута то морамо урадити одвојено за само за црне и само за беле крајеве фигурица. 

Ефикасна имплементација користи претрагу по ширини да нађе најкраћи пут од сваког почетног поља фигурица до сваког другог чвора. Временска сложеност је $O((N+M+D)\cdot K)$, а меморијска $O(N+M+K)$. Мање ефикасне имплементације или изостављање рачунања одређених парности могу решити и претходне подзадатке. 
