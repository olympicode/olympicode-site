## Први подзадатак
Све станице можемо сместити на бројевну праву. Коришћењем једне аутобуске линије у новом плану градског превоза можемо се кретати за $2$ станице улево или за $2$ станице удесно. Самим тим, решење задатка је $\frac{|S-T|}{2}$.

## Други подзадатак
Оригиналан план градског превоза можемо да моделујемо као *стабло*. Стабло је повезан граф такав да између свака два чвора постоји јединствен несамопресецајући пут. Станице су у ствари чворови, док су аутобуске линије гране. У новом плану, између два чвора постоји грана ако и само ако је њихова удаљеност $2$. Приметимо да граф новог плана не мора бити стабло. 

Потребно је одредити дужину пута у оригиналном плану између чворова $S$ и $T$, а затим је поделити са $2$. Њу одређујемо применом алгоритма за претрагу графа попут DFS, односно претрагом у дубину. Ако је та дужина $D$, одговор на задатак је $\frac{D}{2}$.

Укупна сложеност је $O(N)$.

## Трећи подзадатак
Настављамо са језиком теорије графова. Раније смо приметили да у новом графу између два чвора постоји грана ако и само ако је у старом графу њихова удаљеност била $2$. Да би сваки чвор који је у старом плану био достижан из $S$ био и даље достижан, потребно је да у његовом графу постоји циклус непарне дужине. Како то није случај по услову подзадатка, можемо закључити да тај граф нема непаран циклус. Такав граф још називамо и *бипартитивним*. То значи да сваки чвор можемо обојити у две боје на начин да никоја два чворова исте боје нису повезани. Тражење најкраћег пута од $S$ до $T$ је праволинијски. Можемо применити $BFS$ алгоритам директно, тј. претрагу у ширину. Ако алгоритам у оригиналном графу одреди дужину $D$, одговор на задатак је $\frac{D}{2}$.

Укупна сложеност је $O(N+M)$.

## Главно решење
Подребно је наставити у генералном графу који може имати непарне циклусе. Тражимо најкраћи пут *парне* дужине између чворова $S$ и $T$. Потребно је да на неки начин не рачунамо путеве непарне дужине ка решењу, али да их у исто време не занемаримо при налажењу истог. Један начин да то учинимо је да за сваки чвор направимо и његов "непарни" парњак. Дакле, сваки чвор има "парну" и "непарну" верзију, тј. дуплирали смо га. Гране постоје само између чворова различите парности. Сада примећујемо да приликом прелажења из једног чвора у други мењамо тренутну парност чвора. Овим је јасно да је у оваквом графу довољно наћи пут од "парног" $S$ до "парног" $T$, јер од парности последњег чвора у коме смо завршили зависи и парност пута.

Укупна сложеност је $O(N+M)$.
