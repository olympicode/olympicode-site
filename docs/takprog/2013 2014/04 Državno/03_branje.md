
# Брање

  

Аутор: 

Текст и тест примери: 

Анализа решења: 

Тестирање:

  
### Упрошћавање проблема:

Рецимо да смо секли неку висибабу $i$. Приметимо да профит од њеног сечења не зависи од тога које висибабе сем ње смо одсекли, него је увек $Z_i-S_i$. Тај профит ћемо памтити у новом низу $P_i=Z_i-S_i$.

Сада је наш задатак да поделимо низ $P$ у $K=2$ дисјунктна узастопна подниза тако да је збир елемената у њима максималан.


### Решење за $N \le 50$:
У овом подзадатку је довољно ручно проверити све могуће поделе низа на поднизе. Временска сложеност је $O(N^4)$.

### Решење за $N \le 500$:
У овом подзадатку ћемо ићи по десној граници левог подниза. Сада треба схватити да ће лева граница левог подниза бити таква да је збир бројева у левом поднизу максималан. Њу можемо наћи преко једне петље. Након тога радимо двоструку петљу по свим могућим десним поднизовима. Временска сложеност је  $O(N^3)$.

### Решење за $N \le 5000$:
За сваку позицију у низу ћемо прекалкулисати највећи могући збир подниза који почиње $R_i$ и највећи могући збир подниза који завршава у тој позицији $L_i$. То можемо да урадимо преко двоструке петље.

Сада радимо двоструку петљу по десној граници левог подниза и левој граници десног подниза. Ако смо изабрали границе $i$ и $j$ $(i <j)$, онда је најбоља могућа вредност таквог избора $L_i + R_j$.

Временска сложеност је  $O(N^2)$.

### Решење за $К=1$:

Ово није подзадатак у оригиналом задатку, али је важно да га разумемо како бисмо разумели главно решење. У овом подзадатку нам је дат низ и треба да нађемо највећи могући збир неког подниза. 

Можемо да одржавамо $dp[i]$ низ, где је $dp[i]$ највећа вредност подниза који се завршава на $i$. Основни случај је $dp[0]=0$. Ако смо израчунали $dp[k-1]$, онда је $dp[k]=max(dp[k-1],0)+p[k]$, зато што можемо или да наставимо претходни подниз, или да започнемо нови.

Решење задатка је највећа вредност неког елемента у $dp$ низу. Временска сложеност је $O(N)$.

### Главно решење:

Коришћењем решења за $K=1$ можемо да креирамо $dp$ низ. Сада ћемо да имамо низ $L_i$ такав да је $L_i=max(dp_1, dp_2, dp_3, ... ,dp_{i-1}, dp_i)$. To значи да ако се десни крај левог подниза налази негде пре или на позицији $i$, максималан збир левог подниза је $L_i$. 

Слично можемо да одредимо $R_i$ за десни подниз. И сада само треба да прођемо кроз свако $1\le i <N$ и нађемо највеће $L_i + R_{i+1}$. Временска сложеност је $O(N)$.

Бонус: Решите овај задатак када је $K \le N$. Такав задатак није по програму државног такмичења, али може да се појави на СИО.

