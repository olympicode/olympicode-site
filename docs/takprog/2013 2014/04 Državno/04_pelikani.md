# Пеликани
Аутор: 
Текст и тест примери: 
Анализа решења: Богдан Петровић
Тестирање: 



### Први подзадатак:

Због малих ограничења први подзадатак можемо решити симулирањем догађаја типа $1$. То се најједноставније ради тако што избројимо колико пеликана има у сваком реду ако се шетач појавио на источној или западној обали, тј. избројимо колико пеликана има у свакој колони ако се шетач појавио на северној или јужној обали. Након тога само попунимо матрицу сходно избројаним вредностима. На догађаје типа $2$ одговарамо једноставном провером вредности матрице на тој позицији.
Временска сложеност је $O(QN^2)$, а меморијска $O(N^2)$.

### Други подзадатак:
Други подзадатак је унапређење технике првог подзадатка. Посматрајмо број пеликана у сваком реду и у свакој колони. Приметимо да операција типа $1$ мења број пеликана или у редовима или у колонама, не може да промени оба. Према томе, довољно је израчунати само како се редови или колоне мењају на следећи начин:
Претпоставимо да шетач долази са северне стране, остали случајеви се аналогно решавају.
Број пеликана за сваку колону остаје исти. Како сви пеликани иду у редове који су мањег индекса, број пеликана у реду са индексом $i$ после доласка шетача једнак је броју колона које имају $\geq i$ пеликана. То се у сложености $O(N)$ може израчунати коришћењем технике два показивача.
На догађаје типа $2$ одговарамо тако што памтимо на којој страни се појавио послењи шетач и проверавамо за тражено поље у одговарајућем реду или колони.
Временска сложеност је $O(QN)$, а меморијска $O(N^2)$.

### Главно решење:
Све распореде пеликана можемо поделити у $3$ ситуације и њих ћемо анализирати посебно. Назовимо догађај типа $1$ где шетач долази са северне или са јужне стране вертикалан догађај, а догађај типа $1$ где шетач долази са источне или са западне стране хоризонталан догађај.

 1. Пре догађаја типа $2$ на који треба одговорити, није се десио догађај типа $1$. У овом случају само исписујемо вредност траженог поља у почетној матрици.
 2. Пре догађаја типа $2$ на који треба одговорити десили су се или само хоризонтални, или само вертикални догађаји. У том случају, као у претходном подзадатку, памтимо за сваки ред (или колону у зависности од тога да ли су догађаји типа $1$ вертикални или хоризонтални) колико пеликана има, и једноставним рачуном у односу на обалу последњег шетача дајемо одговор.
 3. Пре догађаја типа $2$ на који треба одговорити десили су се и хоризонтални и вертикални догађаји. Приметимо да након што су се десили и хоризонтални и вертикални догађај, број пеликана по редовима је монотон низ, то исто важи и за број пеликана по колонама. Другим речима, пеликани ће на језеру имати облик степеница, слично као на примеру доле:
$$ \begin{matrix}  
1 & 1 & 1 & 1 & 0 & 0\\  
1 & 1 & 1 & 0 & 0 & 0\\ 
1 & 1 & 0 & 0 & 0 & 0\\  
1 & 1 & 0 & 0 & 0 & 0\\ 
1 & 0 & 0 & 0 & 0 & 0\\    
0 & 0 & 0 & 0 & 0 & 0
\end{matrix}$$
Приметимо да за пеликане који образују такав степенаст облик, сваки догађај типа $1$ симетрично пресликава изглед језера. Вертикалан догађај пресликава језеро у односу на $x$ осу, док хоризонталан догађај пресликава језеро у односу на $y$ осу.
То је значајно јер када израчунамо матрицу језера која се добије након образовања степенасте структуре можемо одговарати на упите директно из те матрице тако што враћамо поље $(i,j), (n-i+1,j), (i,n-j+1)$ или $(n-i+1, n-j+1)$ у зависности од обала последњег вертикалног и последњег хоризонталног шетача.
Временска сложеност је $O(Q + N^2)$, а меморијска $O(N^2)$.
