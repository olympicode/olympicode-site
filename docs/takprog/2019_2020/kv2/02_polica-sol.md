
Да би распоред добијен заменом две цифре имао највећу могућу лепоту, желимо да прва цифра буде највећа могућа, па ако иза $A_1$ постоји нека већа вредност, заменићемо је са оном која је:

* највећа, и ако постоји неколико истих
* последњом таквом (да би ставили мању цифру $A_1$ на место са што мањом "тежином").

Уколико оваква цифра не постоји, односно $A_1$ је већа или једнака од свих вредности десно од ње, исти процес пробамо за следећу цифру $A_2$ (где као кандидате за замену гледамо само оне десно од $A_2$), и тако даље док не нађемо пар који се може заменити.

Уколико дођемо до краја броја и нисмо ништа заменили, цифре у почетном распореду су опадајуће, тако да није могуће повећати лепоту распореда. У овом случају нам је циљ да је смањимо што мање (јер морамо направити неку замену). Уколико постоје две исте цифре, заменићемо њих да би лепота остала иста. У супротном, оптимално решење је да заменимо последње две цифре.

"Наивно" решење задатка које за свако $A_i$ пролази кроз све цифре десно од ње има временску сложеност $O(N^2)$, тако да се неће извршити у датом ограничењу за последњи подзадатак. Да би избегли овај корак, на почетку програма можемо пронаћи последње појављивање сваке цифре и сачувати то у помоћном низу, што се може искористити да за свако $A_i$ нађемо оптималну замену у константном времену, и самим тим даје укупну временску сложеност $O(N)$.
