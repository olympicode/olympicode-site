

## Анализа

Посматрајмо низове $r_i$ и $c_i$, који означавају у којој се колони и врсти налазе златници. Видимо да у једном потезу узимамо један златник и мењамо му редни број врсте или редни број колоне за $\pm1$.  Ово значи да ми у једном потезу мењамо вредност једног члана низа $r_i$ за $\pm 1$, или један члан низа $c_i$ за $\pm 1$. Нама је циљ да на крају оба низа $r_i$ и $c_i$ постану пермутација скупа $\{1,2,3,\cdots,n\}$. Означимо са $R$ минимални број потеза да се ово учини са низом $r_i$ а са $C$ минималан број потеза да се ово уради са низом $c_i$. Тада је тражено решење очито барем $R+C$.


Решимо ово за низ $r_i$.  Ако на крају добијемо низ $x_i$ онда нам је требало $S=|r_1-x_1|+|r_2-x_2|+\cdots+|r_n-x_n|$ потеза. Приметимо да ако $r_i<r_j$ и $x_i>x_j$, тада заменом вредности $x_i$ и $x_j$ не повећавамо (а потенцијално смањујемо) резултат. Ово се доказује анализом случаја за све поретке ових $4$ вредности. Овиме видимо да је једно од случајева када се најбоље решење достиже је када су бројеви $x_i$ у истом поретку као и бројеви $r_i$. Ово значи да када је низ $r_i$ сортиран, онда је $R=|r_1-1|+|r_2-2|+\cdots+|r_n-n|$.  По истом принципу важи ако је низ $c_i$ сортиран тада $C=|c_1-1|+|c_2-2|+\cdots+|c_n-n|$.


Прво ћемо анализирати шта се дешава у случају да могу постојати два (или више) новчића на истом пољу у истом тренутку. Тада су координате златнике очигледно независне, па је одговор управо $R+C$.

Међутим, испоставља се да је ово одговор и у правом задатку. Ово је тако јер је могуће извршити низ потеза тако да се достигне једнакост и за $R$ и за $C$ а да при томе никад не буду два златника на истом пољу. Прво ћемо распоредити златнике у различитим редовима у оптималном броју потеза, а после тога је очито јасно да нема проблема распоредити их по различитим колонама јер то што су у различитим редовима гарантује да су на различитим пољима. За тај први део је очито довољно да за сваку колону доведемо златнике на права места без преклопа, јер златници који крећу у различитим колонама ће остати на различитим пољима док само мењамо у којим се редовима мењају. У свакој колони ће постојати неки златници који иду "на горе" и они који иду "на доле". У сваком тренутку ћемо узети онај највиши који треба да иде на горе а није у правом реду и померити га на горе или најнижи који трева да иде на доле а није у правом реду и померити га на доле. Јасно је да овако неће бити никад два на истом пољу јер ако неки златник што иде на горе се поклопи са неким што иде на горе, то је у контрадикцији са тиме да смо изабрали највиши такав златник, а ако се поклопи са неким што иде на доле, то је у контрадикцији са тиме да су почетне вредности $r_i$ у истом поретку као и коначне вредности $r_i$.

Овај алгоритам се сада лако имплементира у $O(n \log (n))$ са обичним сортом или $O(n)$ са *counting* сортом.
