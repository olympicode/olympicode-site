
## Подзадатак 1: $N,M, Q \leq 500$
У овом подзадатку довољно је симулирати решење, тако што ћемо у сваком упиту проћи кроз свих $n$ особа и за сваку особу проверити која је слободна соба са најмањим индексом. Сложеност: $O(NMQ)$.

## Подзадатак 2: $N,M \leq 1.000, Q \leq 20.000$
У овом подзадатку можемо да радимо сличну симулацију, као и у претходном, само што ћемо у "std::set" убацити све слободне собе и потом за сваку особу изабрати или њену резервацију (уколико је има и мања је од првог елемента сета) или најмањи елемент у сету. Уколико изаберемо елемент из сета, избацујемо га, а убацујемо резервацију (уколико је има). Сложеност: $O(QN \log M)$.

## Подзадатак 3: $N,M \leq 1.000, Q \leq 200.000$
У овом подзадатку можемо да радимо сличну симулацију, али тако што ћемо, уместо чувања скупа слободних соба, у сваком тренутку памтити показивач на последњу слободну собу. Сложеност: $O(QN)$.

## Коју собу ће изабрати особа $X$?
Лема: Првих $X$ особа ће попунити првих $X$ нерезервисаних соба, уколико само посматрамо собе које су резервисале особе после особе $X$.

Ова лема се може лако показати индукцијом и раздвајањем на случајеве да ли је особа $X+1$ резервисала собу и где се та соба налази у односу на последњу заузету собу. Сада лако видимо да ће особа $X$ да изабере или $X$-ту слободну собу, уколико посматрамо резервације соба после особе $X$ или собу коју је она резервисала (ако је има). Одавде видимо и да ће за сваку особу увек бити бар једна слободна соба, тј. одговор никада неће бити $-1$.

## Подзадатак 4:  $N,M,Q \leq 300.000, X_i \leq 30$
У овом подзадатку је довољно за сваку собу запамтити која особа ју је резервисала. Потом у упиту за $U_i \leq 30$ симулирамо одабир собе као у подзадатку 3, а за преостале проверимо колико соба су резервисале особе са индексима већим од $U_i$. Сложеност: $O(Q \max X_i)$.

## Подзадатак 5:  $N,M \leq 8.000, Q \leq 300.000$
За овај подзадатак је потребна структура података 2д сегментно стабло у којем памтимо за интервал особа $[l,r]$ и интервал соба $[x,y]$ колико соба из тог интервала није резервисала ни једна особа из интервала $[l,r]$. Потом бинарно претражујемо по решењу најмање $t$, тако да у интервалу $[1,t]$ има бар $U_i$ нерезервисаних соба, уколико посматрамо резервације особа из интервала $[U_i + 1, N]$. Сложеност: $O(Q \log N \log^2 M)$.

## Подзадатак 6:  $N,M \leq 100.000, Q \leq 100.000$
У овом подзадатку користимо исту идеју као и у претходном, али због великог броја особа и соба, морамо да користимо имплицитно 2д сегментно стабло. Сложеност: $O(Q \log N \log^2 M)$.

## Подзадатак 7:  $N,M \leq 300.000, Q \leq 300.000$
У овом подзадатку оптимизујемо идеју из претходног задатка. Наиме, можемо да приметимо да нам је $\log$ од бинарне претраге вишак и да можемо да се "шетамо" по имплицитном 2д сегментном стаблу. Ово радимо тако што запамтимо скуп сегментних стабала која се односе на особе после особе $U_i$ и потом у се у њима шетамо тако што пронађемо суму бројева слободних соба у левом подстаблу сваког. Уколико је та сума већа или једнака са $k = U_i$, онда идемо у то подстабло у сваком стаблу из скупа, у супротном идемо у десно и од $k$ одузмемо суму из левих. Сложеност: $O(Q \log N \log M)$.
