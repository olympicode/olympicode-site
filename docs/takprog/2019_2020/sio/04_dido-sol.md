


Заједничко за све подзадатке јесте то што треба проверити дужину изломљене линије која има облик као што је описано у задатку. Наиме, нека се та линија састоји од $u$ сегмената дужине $1$ и $v$ дијагоналних сегмената дужине $\sqrt{2}$. Тада, треба да важи $u+v\sqrt{2} \leq L$ односно $v \sqrt{2} \leq L-u$, тј. $2v^2 \leq (L-u)^2$ и $u \leq L$.

Такође, потребно је да за дату изломљену линију одредимо двоструку површину између ње и $x$ осе. То можемо урадити помоћу методе означених трапеза. За сваки сегмент те дужи, израчунамо површину трапеза који формирају та дуж и две вертикалне дужи које је спајају са $x$ осом. При томе, површину трапезоида узимамо са позитивним знаком ако дуж иде слева на десно, у супротном је узимамо са негативним знаком. За дуж $((x_1,y_1),(x_2,y_2))$, та двострука површина износи $(y_1+y_2)(x_2-x_1)$. Површина испод целе изломљене линије једнака је збиру означених површина свих овако добијених трапеза.

**У првом подзадатку** довољно је рекурзивно изгенерисати све путање дужине до $L$, a затим проверити да ли оне стижу у циљну тачку и затим израчунати њихову површину.

**Други подзадатак** се може решити ако се у рекурзију додају неки од следећих услова за рани излазак:
* Ако смо превише удаљени од циљне тачке,
* Ако смо искористили смер дужи супротан од претходне.

**Трећи подзадатак** се може решити ако приметимо да је решење увек конвексна фигура. Неформалам доказ овог тврђења дат је на самом крају решења. Ово значи да смер у којем се крећемо почиње од "лево", затим ротира у смеру казаљке на сату и поново се завршава у "лево". Ово значи да се свако решење може описати са $9$ ненегативних целих бројева, који означавају дужине дела пута на којима се крећемо у горе описаним смеровима. Овакви низову се могу пажљиво рекурзивно генерисати и за сваки може да се провери површина добијене фигуре. Временска сложеност решења је $O(\binom{L}{9}) = O(L^9)$, што је довољно, с обзиром на јако малу скривену константу.

**Четврти подзадатак** се може решити применом динамичког програмирања. Нека је $d_{x,y,u,v}$ највећи збир означених површина трапеза који се може добити неком путањом од $(0,0)$ до $(x,y)$ при чему смо искористили $u$ сегмената дужине $1$ и $v$ сегмената дужине $\sqrt{2}$. Прелази су једноставни, за сваки од осам смерова, повећавамо $u$ или $v$ за један и коригујемо $x,y$ координате, док нову површину рачунамо помоћу формуле дате у другом пасусу. Редослед израчунавања може бити растући по $u+v$. Коначно решење је максимална вредност $d_{W,0,u,v}$, где $u,v$ задовољавају неједнакости из првог пасуса. Временска сложеност решења је $O(L^4)$, али са релативно малом скривеном константом.

**Пети подзадатак** се може решити применом динамичког програмирања са другачијим начином рачунања површине. Да би се смањила сложеност, фигура се може градити са оба краја ограде одједном. Нека је $d_{w,u,v}$ највећа површина фигуре која се може добити неком путањом од $(0,0)$ до $(w,0)$ при чему смо искористили $u$ сегмената дужине $1$ и $v$ сегмената дужине $\sqrt{2}$. За прелазе једна опција је да додамо хоризонтални сегмент дужине $1$ на неки крај ограде и тиме повећамо или смањимо $w$ за 1, друга опција је да повећамо $y$ координату на оба краја ограде додавањем сегмената и додамо одговарајућу површину која се добија између та 2 сегмента. 

Сви могући прелази из стања $d_{w,u,v}$ су:

* У стање $d_{w+1,u+1,v}$, на површину се не додаје ништа
* У стање $d_{w-1,u+1,v}$, на површину се не додаје ништа
* У стање $d_{w+2,u,v+2}$, на површину се додаје $2*w+2$
* У стање $d_{w+1,u+1,v+1}$, на површину се додаје $2*w+1$
* У стање $d_{w,u+2,v}$, на површину се додаје $2*w$
* У стање $d_{w-1,u+1,v+1}$, на површину се додаје $2*w-1$
* У стање $d_{w-2,u,v+2}$, на површину се додаје $2*w-2$

Нама је потребна максимална вредност од ових прелаза. 
Редослед израчунавања може бити опадајући по $u+v$. Коначно решење је $d_{W,0,0}$. Временска сложеност решења је $O(L^3)$.

**Изазов:**
Да ли можете да решите задатак у временској сложености $O(L^2)$?

**Доказ:**
Нека је $(p,q)$ најкраћа дуж чија унутрашњост цела лежи ван фигуре, док тачке $p,q$ леже на ивици фигуре тј. на путањи. Уколико ову дуж заменимо једном најкраћом путањом (мерено у осмосмерној метрици) која је "испупчена" у односу на дуж $p,q$, добићемо путању строго мање дужине а фигуру строго веће површине.

