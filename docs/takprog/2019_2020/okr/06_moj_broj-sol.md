
Идеја у овом задатку јесте дистанцирати се од конкретних бројева који су дати у низу $А$. Конструисаћемо низ од $12$ бројева $B$ такав да се сви бројеви од $1$ до $10^8$ могу представити као комбинација бројева из $B$ помоћу рачунских операција.

Један пример овакво скупа бројева јесу сви степени двојке $1, 2, 4, ..., 2^26$. Само сабирањем ових бројева могу се представити сви бројеви у интервалу $[1, 2^{27}-1]$, што је довољно јер је $2^27>10^8$. Конкретно представљање сваког броја иѕ низа $A$ онда се може наћи користећи бинарни запис тог броја. Предвиђено је да ово решење носи $30$ бодова.

Очигледно је да претходна идеја није оптимална јер не користи знакове $-$ и $*$. Да бисмо могли правилно да искористимо знак $-$, направићемо малу промену у претходној идеји: уместо степена двојке, користићемо степене тројке. За то имамо помоћно математичко тврђење:

Лема: Сваки број од $1$ до $3^n$ може се представити у облику $е_03^0+e_13^1+...+e_n3^n$, где су $e_i\in \{-1, 0, 1\}$.
Доказ: Овакво представљање бројева јако је слично са тернарним записом, али уместо цифре $2$, користимо цифру $-1$. До оваквог записа долазимо тако што прво напишемо број у тернарном запису, а затим почевши од цифре најмање вредности проверавамо да ли је та цифра $2$. Ако јесте, мењамо је у $-1$, а следећој цифри најмање вредности додајемо $1$ (у суштини, $2*3^k$ мењамо са $3^{k+1}-3^k$).

Користећи представљање описано горе, могуће је наћи израз облика који користи знакове $+$ и $-$ и представља сваки број од $1$ до $3^{17}$ користећи бројеве $1, 3, ..., 3^{17}$. Ово решење носи $70$ бодова. Овде је добро прокоментарисати и сложеност овог решења. Наиме, описани алгоритам за сваки број налази представљање у $О($дужина тернарног записа$)$, што је $О(log A[i])$. Ово значи да је сложеност укупног решења $О(n*log 10^8)$.

Помоћу идеја описаних горе, лако је генерализовати поступак на базе веће о три. На пример, ако узмемо бројеве $1, 7^1, 7^2, ..., 7^9$, могуће је показати, истим алгоритмом као у доказу леме, да се сваки број од $1$ до $10^8$ може представити као $e_07^0+e_17^1+...+e_97^9$, где су $e_i$ цифре $-3, -2, -1, 0, 1, 2, 3$. Зато ћемо у наш низ $B$ додати и бројеве $2, 3$, што даје низ $B$ од укупно $12$ бројева. Затим ћемо груписати све степене седмице уз које стоји +2 или -2 у једну заграду и њу помножити са $2$ (аналогно за $3$). То значи да бисмо могли добити израз облика нпр. $2*(7^7-7^3)+3*(7^6+7^1)-7^5=1982561$. Овај алгоритам и даље ради у горе наведеној сложености $О(n*log 10^8) $. У описаној имплементацији само треба бити пажљив да свака заграда почиње са позитивним сабирком (ако нека заграда садржи само негативне сабирке, треба извући минус испред заграде).

